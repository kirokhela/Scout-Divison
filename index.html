<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premier League Table - Simplified</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.05) 10px,
                rgba(255, 255, 255, 0.05) 20px
            );
            animation: slide 20s linear infinite;
        }

        @keyframes slide {
            0% { transform: translateX(-50px); }
            100% { transform: translateX(50px); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px;
        }

        .league-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .league-table th {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .league-table th:first-child {
            text-align: center;
            width: 60px;
        }

        .league-table th:nth-child(2) {
            width: 250px;
        }

        .league-table th.gameweek-header {
            text-align: center;
            width: 80px;
        }

        .league-table th.total-header {
            text-align: center;
            width: 100px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .league-table td {
            padding: 15px 12px;
            border-bottom: 1px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .league-table tr:hover {
            background: linear-gradient(90deg, #f8f9fa, #e9ecef);
            transform: translateX(5px);
        }

        .league-table tr:last-child td {
            border-bottom: none;
        }

        .position {
            font-weight: bold;
            font-size: 1.1em;
            color: #2c3e50;
            text-align: center;
            width: 60px;
        }

        .team-name {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .division {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 500;
            margin-left: 10px;
        }

        .division.alpha {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
        }

        .division.beta {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            color: white;
        }

        .points {
            font-weight: bold;
            font-size: 1.1em;
            color: #2c3e50;
            text-align: center;
        }

        .total-points {
            font-weight: bold;
            font-size: 1.3em;
            color: #e74c3c;
            text-align: center;
        }

        .top-3 {
            background: linear-gradient(90deg, #fff9c4, #f7f7f7);
            border-left: 4px solid #f39c12;
        }

        .top-1 {
            background: linear-gradient(90deg, #ffd700, #fff9c4);
            border-left: 4px solid #f1c40f;
        }

        .bottom-3 {
            background: linear-gradient(90deg, #ffebee, #f7f7f7);
            border-left: 4px solid #e74c3c;
        }

        .tied {
            border-left: 4px solid #27ae60;
        }

        .stats-footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 3px;
            border-radius: 2px;
        }

        .legend-color.gold {
            background: #f1c40f;
        }

        .legend-color.orange {
            background: #f39c12;
        }

        .legend-color.red {
            background: #e74c3c;
        }

        .legend-color.green {
            background: #27ae60;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .league-table th,
            .league-table td {
                padding: 10px 8px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kashafa Premier League</h1>
            <p id="current-gameweek">Current Gameweek: 2</p>
        </div>

        <div class="table-container">
            <table class="league-table" id="league-table">
                <thead id="table-header">
                    <tr>
                        <th>Pos</th>
                        <th>Team</th>
                        <th class="gameweek-header">GW1</th>
                        <th class="gameweek-header">GW2</th>
                        <th class="total-header">Total</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Table rows will be generated here -->
                </tbody>
            </table>
        </div>

        <div class="stats-footer">
            <p><strong>Total Teams:</strong> 12 | <strong>Alpha Division:</strong> 6 teams | <strong>Beta Division:</strong> 6 teams</p>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color gold"></div>
                    <span>1st Place</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color orange"></div>
                    <span>Top 3</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color green"></div>
                    <span>Tied</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color red"></div>
                    <span>Bottom 3</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('JavaScript loaded successfully!');
        
        // Simplified data structure with gameweek 2 added
        let gameweeks = {
            1: {
                'Heroes': 23,
                'Krakens': 21,
                'Whales': 21,
                'Hunters': 19,
                'Seals': 18,
                'Sharks': 18,
                'Pirates': 14,
                'Sailors': 14,
                'Strangers': 14,
                'Seahorse': 10,
                'Anchors': 9,
                'Alligators': 6
            },
            2: {
                'Heroes': 15,
                'Seals': 24,
                'Hunters': 17,
                'Whales': 13,
                'Krakens': 7,
                'Sharks': 15,
                'Pirates': 15,
                'Sailors': 7,
                'Strangers': 14,
                'Seahorse': 14,
                'Anchors': 29,
                'Alligators': 14
            }
        };

        // Team information
        let teams = [
            { name: 'Heroes', division: 'Alpha' },
            { name: 'Krakens', division: 'Beta' },
            { name: 'Whales', division: 'Alpha' },
            { name: 'Hunters', division: 'Beta' },
            { name: 'Seals', division: 'Alpha' },
            { name: 'Sharks', division: 'Beta' },
            { name: 'Pirates', division: 'Alpha' },
            { name: 'Sailors', division: 'Beta' },
            { name: 'Strangers', division: 'Beta' },
            { name: 'Seahorse', division: 'Alpha' },
            { name: 'Anchors', division: 'Alpha' },
            { name: 'Alligators', division: 'Beta' }
        ];

        let currentGameweek = 2;

        // Calculate total score for a team
        function calculateTotal(teamName) {
            let total = 0;
            for (let gw = 1; gw <= currentGameweek; gw++) {
                if (gameweeks[gw] && gameweeks[gw][teamName]) {
                    total += gameweeks[gw][teamName];
                }
            }
            return total;
        }

        // Sort teams by total score and add position information
        function getTeamsWithPositions() {
            // First, calculate totals and sort by score
            const teamsWithTotals = teams.map(team => ({
                ...team,
                total: calculateTotal(team.name)
            })).sort((a, b) => b.total - a.total);

            // Then assign positions, handling ties
            let currentPosition = 1;
            let teamsWithPositions = [];
            
            for (let i = 0; i < teamsWithTotals.length; i++) {
                const team = teamsWithTotals[i];
                
                // If this is not the first team and the score is different from previous team
                if (i > 0 && teamsWithTotals[i - 1].total !== team.total) {
                    currentPosition = i + 1;
                }
                
                teamsWithPositions.push({
                    ...team,
                    position: currentPosition
                });
            }
            
            return teamsWithPositions;
        }

        function getPositionClass(position, total, teamsWithPositions) {
            // Check if this team is tied with others
            const teamsWithSameScore = teamsWithPositions.filter(t => t.total === total);
            const isTied = teamsWithSameScore.length > 1;
            
            if (position === 1 && !isTied) return 'top-1';
            if (position === 1 && isTied) return 'tied';
            if (isTied && position > 1) return 'tied';
            if (position <= 3) return 'top-3';
            if (position >= teams.length - 2) return 'bottom-3';
            return '';
        }

        function renderTable() {
            const teamsWithPositions = getTeamsWithPositions();
            const tableBody = document.getElementById('table-body');
            
            tableBody.innerHTML = '';
            
            teamsWithPositions.forEach((team) => {
                const positionClass = getPositionClass(team.position, team.total, teamsWithPositions);
                
                const row = document.createElement('tr');
                row.className = positionClass;
                
                let scoresCells = '';
                for (let i = 1; i <= currentGameweek; i++) {
                    const score = gameweeks[i] && gameweeks[i][team.name] ? gameweeks[i][team.name] : 0;
                    scoresCells += `<td class="points">${score}</td>`;
                }
                
                row.innerHTML = `
                    <td class="position">${team.position}</td>
                    <td class="team-name">
                        ${team.name}
                        <span class="division ${team.division.toLowerCase()}">${team.division}</span>
                    </td>
                    ${scoresCells}
                    <td class="total-points">${team.total}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function renderTableHeader() {
            const tableHeader = document.getElementById('table-header');
            
            let gameweekHeaders = '';
            for (let i = 1; i <= currentGameweek; i++) {
                gameweekHeaders += `<th class="gameweek-header">GW${i}</th>`;
            }
            
            tableHeader.innerHTML = `
                <tr>
                    <th>Pos</th>
                    <th>Team</th>
                    ${gameweekHeaders}
                    <th class="total-header">Total</th>
                </tr>
            `;
        }

        // Initialize the application
        function initializeApp() {
            renderTableHeader();
            renderTable();
            document.getElementById('current-gameweek').textContent = `Current Gameweek: ${currentGameweek}`;
        }

        // Initialize when page loads
        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>
